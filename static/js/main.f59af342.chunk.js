(this["webpackJsonptable-data"]=this["webpackJsonptable-data"]||[]).push([[0],{27:function(e,t,a){e.exports=a.p+"static/media/ring.90c2963b.svg"},30:function(e,t,a){e.exports=a(63)},35:function(e,t,a){},36:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(26),o=a.n(r),l=(a(35),a(1)),u=(a(36),a(12)),i=a.n(u),m=Object(n.createContext)(),s=Object(n.createContext)(),d=Object(n.createContext)(),f=Object(n.createContext)(),E=function(e){var t=e.children,a=Object(n.useState)(!0),r=Object(l.a)(a,2),o=r[0],u=r[1],E=Object(n.useState)(!1),b=Object(l.a)(E,2),h=b[0],g=b[1],p=Object(n.useState)(!0),v=Object(l.a)(p,2),j=v[0],O=v[1],y=Object(n.useState)({}),C=Object(l.a)(y,2),Y=C[0],k=C[1],w=function(e){return Object.values(e).map((function(e){return e.id}))},D=function(e,t){for(var a=t,n=new Date,c=n.getMonth()+1,r=n.getFullYear(),o=[],l=function(t){var n=e[t];o[t]=i.a.get("https://recruitment.hal.skygate.io/incomes/".concat(n)).then((function(e){if(e.data){var n=Object.values(e.data.incomes).reduce((function(e,t){return e+(t=parseFloat(t.value))}),0),o=n/12,l=Object.values(e.data.incomes).reduce((function(e,t){var a=new Date(t.date),n=a.getMonth()+1,o=a.getFullYear();return c-n===5&&r===o&&(e+=parseFloat(t.value)),e}),0);a[t].totalIncome=parseFloat(n.toFixed(2)),a[t].averageIncome=parseFloat(o.toFixed(2)),a[t].lastMonthIncome=parseFloat(l.toFixed(2))}})).catch((function(){g(!0)}))},u=0;u<=e.length-1;u++)l(u);Promise.all(o).then((function(){k(a),O(!1)}))};return Object(n.useEffect)((function(){i.a.get("https://recruitment.hal.skygate.io/companies").then((function(e){return u(!1),g(""),e.data})).then((function(e){return[w(e),e]})).then((function(e){D(e[0],e[1])})).catch((function(){u(!1),k(""),g(!0)}))}),[]),c.a.createElement(d.Provider,{value:h},c.a.createElement(f.Provider,{value:j},c.a.createElement(m.Provider,{value:Y},c.a.createElement(s.Provider,{value:o},t))))},b=a(10);a(54);var h=function(e){for(var t=e.rowsPerPage,a=e.totalRows,n=e.setCurrentPage,r=e.currentPage,o=[],l=1;l<=Math.ceil(a/t);l++)o.push(l);var u=function(e,t){return 0===e?1:e===t.length+1?t.length:e};return c.a.createElement("div",{className:"pagination"},c.a.createElement("button",{onClick:function(){return n(1)}},"first"),c.a.createElement("button",{onClick:function(){return n(u(r-1,o))}},"\u226a"),c.a.createElement("p",null,"page ",r," of ",o.length),c.a.createElement("button",{onClick:function(){return n(u(r+1,o))}},"\u226b"),c.a.createElement("button",{onClick:function(){return n(o.length)}},"last"))},g=(a(55),a(27)),p=a.n(g);a(56);var v=function(e){var t=e.setFilterWord,a=e.setCurrentPage;return c.a.createElement("div",{className:"filtering"},c.a.createElement("p",null,"Filter your data here: "),c.a.createElement("input",{type:"text",placeholder:"",onChange:function(e){t(e.target.value),a(1)}}))};var j=function(e){Object(n.useEffect)((function(){return e.setActualLocation(e.history.location.pathname)}),[]);var t=Object(n.useContext)(m),a=Object(n.useContext)(d),r=Object(n.useContext)(f),o=Object(n.useState)([]),u=Object(l.a)(o,2),i=u[0],s=u[1],E=Object(n.useState)("ascending"),g=Object(l.a)(E,2),j=g[0],O=g[1],y=Object(n.useState)(),C=Object(l.a)(y,2),Y=C[0],k=C[1],w=Object(n.useState)(""),D=Object(l.a)(w,2),M=D[0],S=D[1],x=Object(n.useState)(1),I=Object(l.a)(x,2),F=I[0],L=I[1],P=Object(n.useState)(15),N=Object(l.a)(P,1)[0],A=function(e){k(e);var t=i.slice().sort((function(t,a){return t[e]<a[e]?"ascending"===j?-1:1:t[e]>a[e]?"ascending"===j?1:-1:0}));s(t),O("ascending"===j?"descending":"ascending")},B=function(e){return e===Y?j:void 0};return Object(n.useEffect)((function(){!function(e){var t=Object.values(e);t=t.filter((function(e){return-1!==e.id.toString().search(M.toLowerCase())||-1!==e.name.toLowerCase().search(M.toLowerCase())||-1!==e.city.toLowerCase().search(M.toLowerCase())||-1!==e.totalIncome.toString().search(M.toLowerCase())||-1!==e.averageIncome.toString().search(M.toLowerCase())||-1!==e.lastMonthIncome.toString().search(M.toLowerCase())})),s(t)}(t)}),[M]),Object(n.useEffect)((function(){t&&s(t)}),[t,e.actualLocation]),Object(n.useEffect)((function(){A("totalIncome")}),[r]),a?c.a.createElement("div",null,c.a.createElement("p",null,"Retrieving data was unsuccessful. Check internet connection.")):r?c.a.createElement("div",null,c.a.createElement("img",{src:p.a,alt:"loading_indicator",height:"100px",width:"100px"}),c.a.createElement("p",null,"Preparing your data. Please wait.")):c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"tableContainer"},c.a.createElement("div",null,c.a.createElement(v,{setFilterWord:S,setCurrentPage:L}),c.a.createElement(h,{rowsPerPage:N,totalRows:i.length,setCurrentPage:L,currentPage:F})),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,c.a.createElement("button",{type:"button",onClick:function(){return A("id")},className:B("id")},"ID")),c.a.createElement("th",null,c.a.createElement("button",{type:"button",onClick:function(){return A("name")},className:B("name")},"Name")),c.a.createElement("th",null,c.a.createElement("button",{type:"button",onClick:function(){return A("city")},className:B("city")},"City")),c.a.createElement("th",null,c.a.createElement("button",{type:"button",onClick:function(){return A("totalIncome")},className:B("totalIncome")},"Total Income")),c.a.createElement("th",null,c.a.createElement("button",{type:"button"},"Details")))),c.a.createElement("tbody",null,function(){var e=F*N,t=e-N,a=i.slice(t,e);return Object.values(a).map((function(e){var t=e.id,a=e.name,n=e.city,r=e.totalIncome;return c.a.createElement("tr",{key:"row ".concat(t)},c.a.createElement("td",{key:"".concat(t,".").concat(t)},t),c.a.createElement("td",{key:"".concat(t,".").concat(a)},a),c.a.createElement("td",{key:"".concat(t,".").concat(n)},n),c.a.createElement("td",{key:"".concat(t,".").concat(r)},r),c.a.createElement("td",{key:"".concat(t,".details")},c.a.createElement(b.b,{to:"/".concat(t)},c.a.createElement("button",null,"View details"))))}))}()))))},O=a(8),y=a(3),C=a.n(y);var Y=function(e){Object(n.useEffect)((function(){return e.setActualLocation(e.history.location.pathname)}),[]);var t=Object(n.useContext)(m),a=Object(n.useState)([]),r=Object(l.a)(a,2),o=r[0],u=r[1],s=Object(n.useState)(!1),d=Object(l.a)(s,2),f=d[0],E=d[1],b=Object(n.useState)(""),h=Object(l.a)(b,2),g=h[0],p=h[1],v=Object(n.useState)(""),j=Object(l.a)(v,2),y=j[0],Y=j[1],k=t.filter((function(t){return t.id==e.match.params.id})).map((function(e,t){var a=e.id,n=e.name,r=e.city,o=e.totalIncome,l=e.averageIncome,u=e.lastMonthIncome;return c.a.createElement("div",{key:t},c.a.createElement("h2",null,"Company name: ",n),c.a.createElement("p",{key:t.id},"Company id: ",a),c.a.createElement("p",{key:t.city},"City: ",r),c.a.createElement("p",{key:t.totalIncome},"Total income: ",o),c.a.createElement("p",{key:t.averageIncome},"Average income: ",l),c.a.createElement("p",{key:t.lastMonthIncome},"Last month income: ",u))})),w=o.filter((function(e){return C()(e.date).isBetween(C()(g),C()(y),"day","[]")})).reduce((function(e,t){return e+parseFloat(t.value)}),0).toFixed(2),D=(w/C()(y).diff(C()(g),"months")).toFixed(2),M=function(e){"start"===e.target.name&&p(e.target.value),"end"===e.target.name&&Y(e.target.value)};Object(n.useEffect)((function(){var t;t=e.match.params.id,i.a.get("https://recruitment.hal.skygate.io/incomes/".concat(t)).then((function(e){var t=e.data.incomes.sort((function(e,t){return new Date(e.date)>new Date(t.date)?1:-1}));u(t),E(!0),p(C()(t[0].date).format("YYYY-MM-DD")),Y(C()(t[t.length-1].date).format("YYYY-MM-DD"))}))}),[]);var S=Object(O.f)();return f?f?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"companyView"},c.a.createElement("div",{className:"incomeData"},k),f&&c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{onSubmit:function(e){e.preventDefault()},className:"incomeData"},c.a.createElement("label",null,c.a.createElement("p",null,"Start Date - first possible:"," ","".concat(C()(o[0].date).format("YYYY-MM-DD"))),c.a.createElement("input",{type:"date",name:"start",min:"".concat(C()(o[0].date).format("YYYY-MM-DD")),max:"".concat(C()(o[o.length-1].date).format("YYYY-MM-DD")),onChange:M})),c.a.createElement("label",null,c.a.createElement("p",null,"End Date - last possible"," ","".concat(C()(o[o.length-1].date).format("YYYY-MM-DD"))),c.a.createElement("input",{type:"date",name:"end",min:"".concat(C()(o[0].date).format("YYYY-MM-DD")),max:"".concat(C()(o[o.length-1].date).format("YYYY-MM-DD")),onChange:M}))),c.a.createElement("div",{className:"incomeData"},c.a.createElement("p",null,"Incomes between dates: "),c.a.createElement("p",null,"".concat(g)," and ","".concat(y)),c.a.createElement("p",null,"Total: ",w),c.a.createElement("p",null,"Average:"," ","Infinity"==D?"Choose at least one month range":D)))),c.a.createElement("button",{onClick:function(){return S.goBack()}}," \u2190 take me back")):void 0:"Loading"};var k=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],r=t[1];return c.a.createElement(b.a,null,c.a.createElement(E,null,c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"appHeader"},c.a.createElement("h1",null,"Table of data")),c.a.createElement(O.c,null,c.a.createElement(O.a,{exact:!0,path:"/table-data",render:function(e){return c.a.createElement(j,Object.assign({actualLocation:a,setActualLocation:r},e))}}),c.a.createElement(O.a,{path:"/:id",render:function(e){return c.a.createElement(Y,Object.assign({actualLocation:a,setActualLocation:r},e))}})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.f59af342.chunk.js.map